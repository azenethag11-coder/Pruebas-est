import streamlit as st

st.set_page_config(page_title="Selector de prueba estadÃ­stica", page_icon="ğŸ“Š")

st.title("ğŸ“Š Selector de prueba estadÃ­stica")
st.write("Responde a las preguntas y elige quÃ© prueba estadÃ­stica aplicar segÃºn tu estudio.")

# ---- Pregunta 1: Tipo de variable ----
st.subheader("1) Â¿El dato principal es numÃ©rico o categÃ³rico?")
tipo_variable = st.radio("", ["NumÃ©rico (puntajes, medidas, cantidades)", 
                              "CategÃ³rico (sÃ­/no, grupos, tipos)"])

# ---- Si la variable es categÃ³rica ----
if tipo_variable == "CategÃ³rico (sÃ­/no, grupos, tipos)":
    st.subheader("2) Â¿Deseas analizar relaciÃ³n entre categorÃ­as?")
    cat = st.radio("", ["SÃ­", "No"])

    if cat == "SÃ­":
        st.success("ğŸ‘‰ La prueba recomendada es: **Chi-Cuadrada (Ï‡Â²)**")
    else:
        st.info("âš  No se puede usar pruebas de medias. Se trabaja con proporciones o grÃ¡ficos descriptivos.")
    st.stop()

# ---- Si la variable es numÃ©rica ----
st.subheader("2) Â¿CuÃ¡ntos grupos deseas comparar?")
grupos = st.radio("", ["1 grupo", "2 grupos", "3 o mÃ¡s grupos"])

# ----- Una variable numÃ©rica en 1 grupo ----
if grupos == "1 grupo":
    st.subheader("3) Â¿Deseas evaluar relaciÃ³n con otra variable?")
    relacion = st.radio("", ["SÃ­", "No"])

    if relacion == "No":
        st.info("ğŸ‘‰ No se compara con otra variable, solo **estadÃ­sticos descriptivos**.")
    else:
        st.subheader("4) Â¿La relaciÃ³n es lineal (tiene forma recta)?")
        linear = st.radio("", ["SÃ­", "No/No estoy seguro"])

        if linear == "SÃ­":
            st.success("ğŸ‘‰ Prueba recomendada: **CorrelaciÃ³n de Pearson**")
        else:
            st.success("ğŸ‘‰ Prueba recomendada: **CorrelaciÃ³n de Spearman**")
    st.stop()

# ----- Para 2 grupos numÃ©ricos -----
if grupos == "2 grupos":
    st.subheader("3) Â¿Los datos provienen de las mismas personas (antes-despuÃ©s) o de grupos distintos?")
    dependencia = st.radio("", ["Mismas personas (pareados)", "Grupos distintos (independientes)"])

    st.subheader("4) Â¿Los datos tienen distribuciÃ³n normal?")
    normal2 = st.radio("", ["SÃ­", "No/No estoy seguro"])

    if dependencia == "Grupos distintos (independientes)":
        if normal2 == "SÃ­":
            st.success("ğŸ‘‰ Prueba recomendada: **t de Student para muestras independientes**")
        else:
            st.success("ğŸ‘‰ Prueba recomendada: **U de Mannâ€“Whitney**")
    else:
        if normal2 == "SÃ­":
            st.success("ğŸ‘‰ Prueba recomendada: **t de Student para muestras relacionadas (pareadas)**")
        else:
            st.success("ğŸ‘‰ Prueba recomendada: **Wilcoxon**")

    st.stop()

# ----- Para 3 o mÃ¡s grupos numÃ©ricos -----
if grupos == "3 o mÃ¡s grupos":
    st.subheader("3) Â¿Los grupos son independientes?")
    indep = st.radio("", ["SÃ­, son distintos", "No, son repetidos (mismas personas)"])

    if indep == "No, son repetidos (mismas personas)":
        st.info("âš  Para mÃ¡s de dos mediciones repetidas se utiliza **ANOVA de medidas repetidas** (no incluido en este dashboard).")
        st.stop()

    st.subheader("4) Â¿Los datos tienen distribuciÃ³n normal?")
    normal3 = st.radio("", ["SÃ­", "No/No estoy seguro"])

    if normal3 == "SÃ­":
        st.success("ğŸ‘‰ Prueba recomendada: **ANOVA de un factor**")
    else:
        st.success("ğŸ‘‰ Prueba recomendada: **Kruskalâ€“Wallis**")

    st.stop()

# ---- RelaciÃ³n numÃ©rica (correlaciÃ³n o regresiÃ³n) ----
st.subheader("Â¿Quieres predecir una variable?")
pred = st.radio("", ["SÃ­, quiero predecir", "No"])

if pred == "SÃ­":
    st.success("ğŸ‘‰ Prueba recomendada: **RegresiÃ³n lineal simple**")
